import{c as p,r as l,j as e,A as x,S as w}from"./index-V3jhb2oK.js";import{Q as g,B as o}from"./react-toastify.esm-B7rZn0Co.js";import{O as b}from"./OuterHeader-BxqgbuOw.js";import{u as P,c as j,a as d,b as y}from"./index.esm-CtjtsIdX.js";const S=()=>{const i=p(w,x),[u,r]=l.useState(!1),[t,f]=l.useState(" ");l.useEffect(()=>{const n=window.location.href,a=new URLSearchParams(n.split("#")[1]).get("access_token");console.log(a),f(a)},[t]);const s=P({initialValues:{email:"",password:"",confirmPassword:""},validationSchema:j({email:d().email("Invalid email address").required("Email is required"),password:d().required("Enter your password"),confirmPassword:d().required("Enter confirm password").oneOf([y("password"),null],"Password and Confirm Password must match")})}),c=async n=>{if(n.preventDefault(),r(!0),t==null)return r(!1),o.error("Your password link has been expired, Please try again"),!1;console.log("searhpara",t);const{data:h,error:a}=await i.auth.refreshSession();a&&o.error(a.message);const{data:N,error:m}=await i.auth.updateUser({email:s.values.email,password:s.values.confirmPassword});m?(r(!1),o.error(m.message)):(r(!1),o.success("Password updated successfully!"))};return e.jsxs("div",{className:"py-16 ",children:[e.jsx(b,{}),e.jsx("div",{className:"flex items-left justify-center  ",children:e.jsxs("div",{className:"bg-white px-8 py-6 rounded-lg shadow-md w-full max-w-md  border-2 text-left mx-4",children:[e.jsx("h2",{className:"text-2xl text-center font-bold mb-6",children:"Change Password"}),e.jsxs("form",{id:"changePasswordForm",onSubmit:c,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-700 text-sm font-bold mb-2 text-left",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",name:"email",value:s.values.email,onChange:s.handleChange,onBlur:s.handleBlur,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0}),e.jsx("span",{id:"emailError",className:"text-red-500 text-sm ",children:s.touched.email&&s.errors.email})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-bold mb-2 text-left",children:"Password"}),e.jsx("input",{value:s.values.password,type:"password",id:"password",name:"password",onChange:s.handleChange,onBlur:s.handleBlur,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}),e.jsxs("span",{id:"passwordError",className:"text-red-500 text-sm ",children:[" ",s.touched.password&&s.errors.password]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-gray-700 text-sm font-bold mb-2 text-left",children:"Confirm Password"}),e.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:s.values.confirmPassword,onChange:s.handleChange,onBlur:s.handleBlur,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}),e.jsx("span",{id:"confirmPasswordError",className:"text-red-500 text-sm ",children:s.touched.confirmPassword&&s.errors.confirmPassword})]}),e.jsx("button",{disabled:u,onClick:c,type:"submit",id:"submitButton",className:"bg-black 0 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-offset-2 flex justify-end items-end",children:"Change Password"})]})]})}),e.jsx(g,{})]})};export{S as default};
